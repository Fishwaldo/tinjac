WT_DECLARE_WT_MEMBER(1,"WTreeView",function(l,d,k,s,p){function o(c){var a=-1,b=null,f=false,h=false,g=null;for(c=e.target(c);c;){if(c.className.indexOf("c1 rh")==0){if(a==-1)a=0}else if(c.className.indexOf("Wt-tv-c")==0){if(c.className.indexOf("Wt-tv-c")==0)a=c.className.split(" ")[0].substring(7)*1;else if(a==-1)a=0;if(c.getAttribute("drop")==="true")h=true;g=c}else if(c.className=="Wt-tv-node"){b=c.id;break}if(c.className==="Wt-selected")f=true;c=c.parentNode;if(e.hasTag(c,"BODY"))break}return{columnId:a,
nodeId:b,selected:f,drop:h,el:g}}jQuery.data(d,"obj",this);var q=k.firstChild,j=s.firstChild,r=this,e=l.WT;this.click=function(c,a){var b=o(a);b.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"clicked","","")};this.dblClick=function(c,a){var b=o(a);b.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"dblclicked","","")};this.mouseDown=function(c,a){e.capture(null);var b=o(a);if(b.columnId!=-1){l.emit(d,{name:"itemEvent",eventObject:c,
event:a},b.nodeId,b.columnId,"mousedown","","");d.getAttribute("drag")==="true"&&b.selected&&l._p_.dragStart(d,a)}};this.mouseUp=function(c,a){var b=o(a);b.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"mouseup","","")};this.resizeHandleMDown=function(c,a){var b=c.parentNode.parentNode.className.split(" ")[0];if(b){var f=e.getCssRule("#"+d.id+" ."+b),h=e.pxself(f,"width");new e.SizeHandle(e,"h",c.offsetWidth,d.offsetHeight,-h,1E4,"Wt-hsh",function(g){g=h+g;var m=
b.substring(7)*1;f.style.width=g+"px";r.adjustColumns();l.emit(d,"columnResized",m,parseInt(g))},c,d,a,-2,-1)}};this.adjustColumns=function(){var c=q.firstChild,a=j.firstChild,b=0,f=0;f=j.lastChild.className.split(" ")[0];var h=e.getCssRule("#"+d.id+" ."+f);if(p)a=a.firstChild;if(!e.isHidden(d)){for(var g=0,m=a.childNodes.length;g<m;++g)if(a.childNodes[g].className){var i=a.childNodes[g].className.split(" ")[0];i=e.getCssRule("#"+d.id+" ."+i);if(i.style.display!="none")b+=e.pxself(i,"width")+7}if(!p)if(h.style.width)$(d).find(".Wt-headerdiv ."+
f).css("width",h.style.width);else h.style.width=j.offsetWidth-a.offsetWidth-8+"px";f=b+e.pxself(h,"width")+(e.isIE6?10:8);if(p){i=e.getCssRule("#"+d.id+" .Wt-tv-rowc");i.style.width=b+"px";$(d).find(".Wt-tv-rowc").css("width",b+"px").css("width","");d.changed=true;this.autoJavaScript()}else{j.style.width=c.style.width=f+"px";a.style.width=b+"px"}}};var n=null;d.handleDragDrop=function(c,a,b,f,h){if(n){n.className=n.classNameOrig;n=null}if(c!="end"){var g=o(b);if(!g.selected&&g.drop&&g.columnId!=
-1)if(c=="drop")l.emit(d,{name:"itemEvent",eventObject:a,event:b},g.nodeId,g.columnId,"drop",f,h);else{a.className="Wt-valid-drop";n=g.el;n.classNameOrig=n.className;n.className+=" Wt-drop-site"}else a.className=""}};this.autoJavaScript=function(){if(d.parentNode==null){d=k=s=q=j=null;this.autoJavaScript=function(){}}else if(!e.isHidden(d)){var c=$(d),a=c.innerWidth(),b,f=null,h=k.offsetWidth-k.clientWidth;a-=h;if(c.hasClass("column1")){b=c.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];
b=e.getCssRule("#"+d.id+" ."+b);f=e.pxself(b,"width")}if((!e.isIE||a>100)&&(a!=k.tw||f!=k.c0w||d.changed)){var g=!d.changed;k.tw=a;k.c0w=f;b=c.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];b=e.getCssRule("#"+d.id+" ."+b);var m=q.firstChild,i=e.getCssRule("#"+d.id+" .cwidth"),t=i.style.width==j.style.width,u=j.firstChild;i.style.width=a+"px";k.style.width=a+h+"px";j.style.width=m.offsetWidth+"px";if(f!=null){f=a-f-(e.isIE6?10:8);if(f>0){h=Math.min(f,e.pxself(e.getCssRule("#"+d.id+
" .Wt-tv-rowc"),"width"));a-=f-h;e.getCssRule("#"+d.id+" .Wt-tv-row").style.width=h+"px";c.find(" .Wt-tv-row").css("width",h+"px").css("width","");j.style.width=a+"px";m.style.width=a+"px"}}else if(t){j.style.width=i.style.width;m.style.width=i.style.width}if(!p)b.style.width=m.offsetWidth-u.offsetWidth-8+"px";d.changed=false;g&&r.adjustColumns()}}};r.adjustColumns()});
