WT_DECLARE_WT_MEMBER(1,"WTableView",function(n,i,g,p){function q(a){var b=-1,c=false,d=false,k=null;for(a=f.target(a);a;){var h=$(a);if(h.hasClass("Wt-tv-contents"))break;else if(h.hasClass("Wt-tv-c")){if(a.getAttribute("drop")==="true")d=true;if(h.hasClass("Wt-selected"))c=true;k=a;a=a.parentNode;b=a.className.split(" ")[0].substring(7)*1;break}a=a.parentNode}return{columnId:b,rowIdx:-1,selected:c,drop:d,el:k}}function r(a){var b,c,d=a.parentNode.childNodes;b=0;for(c=d.length;b<c;++b)if(d[b]==a)return b;
return-1}function w(a,b){var c=a.className.split(" ")[0],d=c.substring(7)*1,k=p.firstChild,h=g.firstChild;c=$(h).find("."+c).get(0);var j=a.nextSibling,e=c.nextSibling,l=f.pxself(a,"width")-1+b;k.style.width=h.style.width=f.pxself(k,"width")+b+"px";a.style.width=l+1+"px";for(c.style.width=l+7+"px";j;j=j.nextSibling)if(e){e.style.left=f.pxself(e,"left")+b+"px";e=e.nextSibling}n.emit(i,"columnResized",d,parseInt(l))}jQuery.data(i,"obj",this);var f=n.WT,s=0,t=0,u=0,v=0;g.onscroll=function(){p.scrollLeft=
g.scrollLeft;if(g.scrollTop<u||g.scrollTop>v||g.scrollLeft<s||g.scrollLeft>t)n.emit(i,"scrolled",g.scrollLeft,g.scrollTop,g.clientWidth,g.clientHeight)};this.mouseDown=function(a,b){f.capture(null);a=q(b);i.getAttribute("drag")==="true"&&a.selected&&n._p_.dragStart(i,b)};this.resizeHandleMDown=function(a,b){var c=a.parentNode.parentNode,d=-(f.pxself(c,"width")-1);new f.SizeHandle(f,"h",a.offsetWidth,i.offsetHeight,d,1E4,"Wt-hsh",function(k){w(c,k)},a,i,b,-2,-1)};this.scrolled=function(a,b,c,d){s=
a;t=b;u=c;v=d};var m=null;i.handleDragDrop=function(a,b,c,d,k){if(m){m.className=m.classNameOrig;m=null}if(a!="end"){var h=q(c);if(!h.selected&&h.drop)if(a=="drop")n.emit(i,{name:"dropEvent",eventObject:b,event:c},h.rowIdx,h.columnId,d,k);else{b.className="Wt-valid-drop";m=h.el;m.classNameOrig=m.className;m.className+=" Wt-drop-site"}else b.className=""}};i.onkeydown=function(a){var b=a||window.event;if(b.keyCode==9){f.cancelEvent(b);var c=q(b);if(c.el){a=c.el.parentNode;c=r(c.el);var d=r(a),k=a.parentNode.childNodes.length,
h=a.childNodes.length;b=b.shiftKey;for(var j=false,e=c,l;;){for(;b?e>=0:e<h;e=b?e-1:e+1)for(l=e==c&&!j?b?d-1:d+1:b?k-1:0;b?l>=0:l<k;l=b?l-1:l+1){if(e==c&&l==d)return;a=a.parentNode.childNodes[l];var o=$(a.childNodes[e]).find(":input");if(o.size()>0){setTimeout(function(){o.focus()},0);return}}e=b?h-1:0;j=true}}}else if(b.keyCode>=37&&b.keyCode<=40){j=f.target(b);if(j.nodeName!="select"){c=q(b);if(c.el){a=c.el.parentNode;c=r(c.el);d=r(a);k=a.parentNode.childNodes.length;h=a.childNodes.length;switch(b.keyCode){case 39:if(f.hasTag(j,
"INPUT")&&j.type=="text"){e=f.getSelectionRange(j);if(e.start!=j.value.length)return}d++;break;case 38:c--;break;case 37:if(f.hasTag(j,"INPUT")&&j.type=="text"){e=f.getSelectionRange(j);if(e.start!=0)return}d--;break;case 40:c++;break;default:return}f.cancelEvent(b);if(c>-1&&c<h&&d>-1&&d<k){a=a.parentNode.childNodes[d];o=$(a.childNodes[c]).find(":input");o.size()>0&&setTimeout(function(){o.focus()},0)}}}}};this.autoJavaScript=function(){if(i.parentNode==null){i=g=p=null;this.autoJavaScript=function(){}}else if(!f.isHidden(i)){var a=
i.offsetWidth-f.px(i,"borderLeftWidth")-f.px(i,"borderRightWidth"),b=g.offsetWidth-g.clientWidth;a-=b;if(a>200&&a!=g.tw){g.tw=a;g.style.width=a+b+"px";p.style.width=a+"px"}}}});
