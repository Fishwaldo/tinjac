WT_DECLARE_WT_MEMBER(1,"WGLWidget",function(r,j){jQuery.data(j,"obj",this);var f=r.WT,l=f.glMatrix.vec3,b=f.glMatrix.mat4;this.ctx=null;this.initializeGL=function(){};this.paintGL=function(){};this.resizeGL=function(){};this.updates=[];this.initialized=false;var h=null,i=null,m=null,n=0,o=0,e=null,p=0,q=0;this.discoverContext=function(a){if(j.getContext){try{this.ctx=j.getContext("webgl",{antialias:true})}catch(c){}if(this.ctx==null)try{this.ctx=j.getContext("experimental-webgl")}catch(d){}if(this.ctx==
null){j.parentNode.replaceChild(j.firstChild,j);a()}}return this.ctx};this.setLookAtParams=function(a,c,d,g,k){e=a;i=c;m=d;n=g;o=k};this.mouseDragLookAt=function(a,c){if(this.ctx!=null){var d=f.pageCoordinates(c);a=d.x-h.x;d=d.y-h.y;var g=l.create();g[0]=e[0];g[1]=e[4];g[2]=e[8];var k=b.create();b.identity(k);b.translate(k,i);b.rotate(k,d*n,g);b.rotate(k,a*o,m);l.negate(i);b.translate(k,i);l.negate(i);b.multiply(e,k,e);this.paintGL();h=f.pageCoordinates(c)}};this.mouseWheelLookAt=function(a,c){if(this.ctx!=
null){f.cancelEvent(c);a=f.wheelDelta(c);a=Math.pow(1.2,a);b.translate(e,i);b.scale(e,[a,a,a]);l.negate(i);b.translate(e,i);l.negate(i);this.paintGL()}};this.setWalkParams=function(a,c,d){e=a;p=c;q=d};this.mouseDragWalk=function(a,c){if(this.ctx!=null){var d=f.pageCoordinates(c);a=d.x-h.x;d=d.y-h.y;var g=b.create();b.identity(g);b.rotateY(g,a*q);a=l.create();a[0]=0;a[1]=0;a[2]=-p*d;b.translate(g,a);b.multiply(g,e,e);this.paintGL();h=f.pageCoordinates(c)}};this.mouseDown=function(a,c){f.capture(null);
f.capture(j);h=f.pageCoordinates(c)};this.mouseUp=function(){if(h!=null)h=null}});
