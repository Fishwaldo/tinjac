.TH ANACRON 8 2009-07-17 "Marcela Mašláňová" "Anacron Users' Manual"
.SH NAME
anacron \- runs commands periodically
.SH SYNOPSIS
.B anacron \fR[\fB-s\fR] [\fB-f\fR] [\fB-n\fR] [\fB-d\fR] [\fB-q\fR]
[\fB-t anacrontab\fR] [\fB-S spooldir\fR] [\fIjob\fR]
.br
.B anacron \fR[\fB-S spooldir\fR] -u [\fB-t anacrontab\fR] \fR[\fIjob\fR]
.br
.B anacron \fR[\fB-V\fR|\fB-h\fR]
.br
.B anacron -T \fR[\fB-t anacrontab\fR]
.SH DESCRIPTION
Anacron
is used to execute commands periodically, with a
frequency specified in days.  Unlike \fBcron(8)\fR,
it does not assume that the machine is running continuously.  Hence,
it can be used on machines that are not running 24 hours a day
to control regular jobs as daily, weekly, and monthly jobs.
.PP
Anacron reads a list of jobs from the
.I /etc/anacrontab
configuration file (see \fBanacrontab(5)\fR).  This file
contains the list of jobs that Anacron controls.  Each
job entry specifies a period in days, 
a delay in minutes, a unique
job identifier, and a shell command.
.PP
For each job, Anacron checks whether
this job has been executed in the last \fBn\fR days, where \fBn\fR is the time period specified
for that job.  If a job has not been executed in \fBn\fR days or more, Anacron runs the job's shell command, after waiting
for the number of minutes specified as the delay parameter.
.PP
After the command exits, Anacron records the date (excludes the hour) in a special
timestamp file for that job, so it knows when to execute that job again.
.PP
When there are no more jobs to be run, Anacron exits.
.PP
Anacron only considers jobs whose identifier, as
specified in \fBanacrontab(5)\fR, matches any of
the
.I job
command-line arguments.  The
.I job
command-line arguments can be represented by shell wildcard patterns (be sure to protect them from
your shell with adequate quoting).  Specifying no
.I job
command-line arguments is equivalent to specifying "*"  (that is, all jobs are
considered by Anacron).
.PP 
Unless Anacron is run with the \fB-d\fR option (specified below), it forks to the
background when it starts, and any parent processes exit immediately.
.PP
Unless Anacron is run with the \fB-s\fR or \fB-n\fR options, it starts jobs
immediately when their delay is over.  The execution of different jobs is
completely independent.
.PP
If an executed job generates any output to standard output or to standard error,
the output is mailed to the user under whom Anacron is running (usually root), or to
the address specified in the \fBMAILTO\fR environment variable in the
.I /etc/anacrontab 
file, if such exists. If the \fBLOGNAME\fR environment variable is set, it is used in the From: field of the mail.
.PP
Any informative messages generated by Anacron are sent to \fBsyslogd(8)\fR
or \fBrsyslogd(8)\fR under with facility set to \fBcron\fR and priority set to \fBnotice\fR.  Any error 
messages are sent with the priority \fBerror\fR.
.PP
"Active" jobs (i.e. jobs that Anacron already decided
to run and are now waiting for their delay to pass, and jobs that are currently
being executed by
Anacron), are "locked", so that other copies of Anacron cannot run them
at the same time.
.SH OPTIONS
.TP
.B -f
Forces execution of all jobs, ignoring any timestamps.
.TP
.B -u
Updates the timestamps of all jobs to the current date, but
does not run any.
.TP
.B -s
Serializes execution of jobs.  Anacron does not start a new job before the
previous one finished.
.TP
.B -n
Runs jobs immediately and ignores the specified delays in the
.I /etc/anacrontab
file.  This options implies \fB-s\fR.
.TP
.B -d
Does not fork Anacron to the background.  In this mode, Anacron will output informational
messages to standard error, as well as to syslog.  The output of any job
is mailed by Anacron.
.TP
.B -q
Suppresses any messages to standard error.  Only applicable with \fB-d\fR.
.TP
.B -t some_anacrontab
Uses the specified anacrontab, rather than the
.I /etc/anacrontab
default one.
.TP
.B -T
Anacrontab testing. Tests the 
.I /etc/anacrontab
configuration file for validity. If
there is an error in the file, it is shown on the standard output and Anacron 
returns the value of 1. Valid anacrontabs return the value of 0.
.TP
.B -S spooldir
Uses the specified spooldir to store timestamps in. This option is required for
users who wish to run anacron themselves.
.TP
.B -V
Prints version information, and exits.
.TP
.B -h
Prints short usage message, and exits.
.SH SIGNALS
After receiving a \fBSIGUSR1\fR signal, Anacron waits for any running
jobs to finish and then exits.  This can be used to stop
Anacron cleanly.
.SH NOTES
Make sure your time-zone is set correctly before Anacron is
started since the time-zone affects the date.  This is usually accomplished
by setting the TZ environment variable, or by installing a
.I /usr/lib/zoneinfo/localtime
file.  See
.B tzset(3)
for more information.

Timestamp files are created in the spool directory for each job specified in an anacrontab. These files are never removed automatically by Anacron, and should be removed by hand if a job is no longer being scheduled.
.SH FILES
.TP
.I /etc/anacrontab
Contains specifications of jobs.  See \fBanacrontab(5)\fR for a complete
description.
.TP
.I /var/spool/anacron
This directory is used by Anacron for storing timestamp files.
.SH "SEE ALSO"
.BR anacrontab (5), cron (8), tzset (3)
.PP
The Anacron
.I README
file.
.SH BUGS
Anacron never removes timestamp files.  Remove unused files manually.
.PP
Anacron
uses up to two file descriptors for each active job.  It may run out of
descriptors if there are more than about 125 active jobs (on normal kernels).
.PP
Mail comments, suggestions and bug reports to Sean 'Shaleh' Perry <shaleh@(debian.org|valinux.com)>.
.SH AUTHOR
Anacron was originally conceived and implemented by Christian Schwarz
<schwarz@monet.m.isar.de>.
.PP
The current implementation is a complete rewrite by Itai Tzur
<itzur@actcom.co.il>.
.PP
The code base was maintained by Sean 'Shaleh' Perry <shaleh@(debian.org|valinux.com)>.
.PP
Since 2004, it is maintained by Pascal Hakim <pasc@(debian.org|redellipse.net)>.
.PP
For Fedora, Anacron is maintained by Marcela Mašláňová <mmaslano@redhat.com>.
